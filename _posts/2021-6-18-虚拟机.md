---
title: java虚拟机
tags:
 
---



# 内存区域与内存溢出异常

## 运行时数据区域

![演示文稿1](https://cdn.jsdelivr.net/gh/nanxi1234/nanxi1234.github.io/image/2021/20210620200635.jpg)

### 程序计数器

是一块较小的内存空间，它可以看作当前线程所执行的字节码的行号指示器，字节码解释器的工作时通过改变这个计数器的值来选取下一条所要执行的字节码指令。

由于Java的多线程是通过线程轮流切换，分配处理器执行时间的方式来实现的，为了线程切换之后能够恢复到正确的执行位置，每条线程都需要有自己的程序计数器，称这类内存区域为*线程私有内存*。

唯一一个没有OutOfMemoryError情况的区域

### java虚拟机栈

虚拟机栈也是线程私有的，生命周期与线程相同，虚拟机栈描述的是java方法执行的线程内存模型，每个方法执行时，虚拟机会同步创造一个栈帧用于存储局部变量表、操作数栈、动态连接、方法出口等信息，每一个方法从被调用到执行完毕的过程中，对应一个个栈帧在虚拟机中入栈出栈的过程。

局部变量表存放了编译期可知的各种Java虚拟机基本数据类型：boolean、char、byte、long、short、int、String、double

64位的double和long类型的数据会占用两个变量槽，其余的数据类型只用一个

异常情况：如果线程请求的栈深度大于虚拟机所允许的深度，将会抛出StackOverFlowError异常；如果虚拟机的内存可以动态拓展，当栈无法申请到足够的内存时会抛出OutOfMemoryError异常。

### 本地方法栈

JAVA方法是由JAVA编写的，编译成字节码，存储在class文件中

本地方法是由其它语言编写的，编译成和处理器相关的机器代码

和虚拟机栈所发挥的作用相似，区别在于虚拟机栈只为虚拟机所执行的java方法服务，而本地方法栈则是为虚拟机使用到的本地方法服务。

异常：和虚拟机栈一样

### java堆

